<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-commerce Fraud Detection System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --accent: #2980b9;
      --success: #27ae60;
      --danger: #e74c3c;
      --light: #ecf0f1;
      --dark: #34495e;
      --gray: #95a5a6;
      --border: #bdc3c7;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f8f9fa;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Header & Navigation */
    header {
      background: linear-gradient(135deg, var(--primary), var(--dark));
      color: white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .navbar-brand {
      font-weight: 700;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .navbar-brand i {
      color: var(--secondary);
    }
    
    .nav-link {
      color: rgba(255, 255, 255, 0.85) !important;
      font-weight: 500;
      padding: 0.5rem 1rem !important;
      border-radius: 4px;
      transition: all 0.3s;
      margin: 0 2px;
    }
    
    .nav-link:hover, .nav-link.active {
      color: white !important;
      background: rgba(255, 255, 255, 0.1);
    }
    
    .nav-link i {
      margin-right: 8px;
    }
    
    /* Main Content */
    main {
      flex: 1;
      padding: 2rem 0;
    }
    
    .container {
      max-width: 1400px;
    }
    
    .page-header {
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .card {
      border: none;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      margin-bottom: 1.5rem;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    
    .card-header {
      background: linear-gradient(to right, var(--primary), var(--dark));
      color: white;
      font-weight: 600;
      border-radius: 10px 10px 0 0 !important;
      padding: 1rem 1.5rem;
    }
    
    /* Form Styles */
    .form-control, .form-select {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem;
      font-size: 1rem;
      transition: all 0.3s;
    }
    
    .form-control:focus, .form-select:focus {
      border-color: var(--secondary);
      box-shadow: 0 0 0 0.25rem rgba(52, 152, 219, 0.25);
    }
    
    .btn {
      border-radius: 8px;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: linear-gradient(to right, var(--secondary), var(--accent));
      border: none;
    }
    
    .btn-primary:hover {
      background: linear-gradient(to right, var(--accent), var(--primary));
      transform: translateY(-2px);
    }
    
    /* Results */
    .result-container {
      text-align: center;
      padding: 2rem;
      border-radius: 10px;
      margin-top: 2rem;
    }
    
    .fraud-result {
      background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
      color: #c62828;
    }
    
    .safe-result {
      background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
      color: #2e7d32;
    }
    
    .result-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }
    
    /* Table Styles */
    .table-container {
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    thead {
      background: linear-gradient(to right, var(--primary), var(--dark));
      color: white;
    }
    
    th {
      padding: 1rem;
      text-align: left;
      font-weight: 600;
    }
    
    tbody tr {
      border-bottom: 1px solid var(--border);
    }
    
    tbody tr:nth-child(even) {
      background-color: rgba(236, 240, 241, 0.5);
    }
    
    tbody tr:hover {
      background-color: rgba(52, 152, 219, 0.1);
    }
    
    td {
      padding: 1rem;
    }
    
    /* Visualization */
    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .chart-container {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .chart-title {
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--dark);
      text-align: center;
    }
    
    /* Footer */
    footer {
      background: linear-gradient(135deg, var(--dark), var(--primary));
      color: white;
      padding: 2rem 0;
      margin-top: auto;
    }
    
    .footer-content {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 2rem;
    }
    
    .footer-section {
      flex: 1;
      min-width: 250px;
    }
    
    .footer-section h5 {
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.5rem;
    }
    
    .footer-section h5::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: var(--secondary);
    }
    
    .footer-links {
      list-style: none;
      padding: 0;
    }
    
    .footer-links li {
      margin-bottom: 0.75rem;
    }
    
    .footer-links a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .footer-links a:hover {
      color: white;
      transform: translateX(5px);
    }
    
    .copyright {
      text-align: center;
      padding-top: 2rem;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .page-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .chart-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Header with Navigation -->
  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="#">
          <i class="fas fa-shield-alt"></i>
          FraudShield
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon text-white">☰</span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" href="/"><i class="fas fa-search"></i> Predict</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/visualize"><i class="fas fa-chart-bar"></i> Visualize</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/history"><i class="fas fa-history"></i> History</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/upload"><i class="fas fa-upload"></i> Upload</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about"><i class="fas fa-info-circle"></i> About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main>
    <div class="container">
      <!-- Prediction Section -->
      <section id="predict" class="page-section">
        <div class="page-header">
          <h2><i class="fas fa-search me-2"></i> Fraud Detection</h2>
          <div class="badge bg-primary p-2">Real-time Analysis</div>
        </div>
        
        <div class="row">
          <div class="col-lg-8">
            <div class="card">
              <div class="card-header">
                Transaction Details
              </div>
              <div class="card-body">
                <form method="POST" action="/predict">
                  <div class="row g-3 mb-4">
                    <div class="col-md-6">
                      <label class="form-label">Customer Name</label>
                      <input type="text" name="name" class="form-control" placeholder="Enter customer name" required>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Item Purchased</label>
                      <select name="item" class="form-select" required>
                        <option value="">Select item</option>
                        <option value="Phone">Phone</option>
                        <option value="Laptop">Laptop</option>
                        <option value="Watch">Watch</option>
                        <option value="Headphones">Headphones</option>
                        <option value="Shoes">Shoes</option>
                        <option value="Camera">Camera</option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">City</label>
                      <select name="city" class="form-select" required>
                        <option value="">Select city</option>
                        <option value="Mumbai">Mumbai</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Bangalore">Bangalore</option>
                        <option value="Chennai">Chennai</option>
                        <option value="Hyderabad">Hyderabad</option>
                        <option value="Kolkata">Kolkata</option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Transaction Price ($)</label>
                      <input type="number" name="price" step="0.01" min="0.01" class="form-control" placeholder="Enter amount" required>
                    </div>
                    <div class="col-md-12">
                      <label class="form-label">Select Model</label>
                      <select name="model" class="form-select" required>
                        <option value="">Choose detection model</option>
                        <option value="RandomForest">Random Forest</option>
                        <option value="SVM">Support Vector Machine (SVM)</option>
                        <option value="NaiveBayes">Naive Bayes</option>
                        <option value="LogisticRegression">Logistic Regression</option>
                        <option value="GradientBoosting">Gradient Boosting</option>
                      </select>
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary w-100 py-3">
                    <i class="fas fa-bolt me-2"></i> Analyze Transaction
                  </button>
                </form>
              </div>
            </div>
          </div>
          
          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">
                Analysis Results
              </div>
              <div class="card-body">
                {% if result %}
                  <div class="text-center mb-4">
                    {% if result.prediction == 'Fraud' %}
                    <div class="result-icon">
                      <i class="fas fa-exclamation-triangle text-danger"></i>
                    </div>
                    <h3 class="text-danger">⚠️ Fraud Detected</h3>
                    <p class="text-muted">This transaction appears fraudulent with {{ result.probability }} risk</p>
                    {% else %}
                    <div class="result-icon">
                      <i class="fas fa-shield-check text-success"></i>
                    </div>
                    <h3 class="text-success">✅ Safe Transaction</h3>
                    <p class="text-muted">This transaction appears legitimate with {{ result.probability }} fraud risk</p>
                    {% endif %}
                  </div>
                {% else %}
                  <div class="text-center mb-4">
                    <div class="result-icon">
                      <i class="fas fa-search text-muted"></i>
                    </div>
                    <h3 class="text-muted">Ready to Analyze</h3>
                    <p class="text-muted">Fill in the transaction details and click "Analyze Transaction" to get results</p>
                  </div>
                {% endif %}
                
                <div class="d-grid gap-2">
                  {% if result %}
                  <a href="/download" class="btn btn-outline-primary">
                    <i class="fas fa-download me-2"></i> Download Report
                  </a>
                  {% endif %}
                  <a href="/history" class="btn btn-outline-secondary">
                    <i class="fas fa-history me-2"></i> View History
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Visualization Section -->
      <section id="visualize" class="page-section mt-5">
        <div class="page-header">
          <h2><i class="fas fa-chart-bar me-2"></i> Data Visualizations</h2>
          <div class="badge bg-info p-2">Interactive Charts</div>
        </div>
        
        {% if total_predictions and total_predictions > 0 %}
        <div class="row">
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h3 class="text-primary">{{ total_predictions }}</h3>
                <p class="mb-0">Total Predictions</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h3 class="text-danger">{{ fraud_count or 0 }}</h3>
                <p class="mb-0">Fraud Detected</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h3 class="text-success">{{ (total_predictions or 0) - (fraud_count or 0) }}</h3>
                <p class="mb-0">Safe Transactions</p>
              </div>
            </div>
          </div>
        </div>
        <div class="text-center mt-3">
          <a href="/visualize" class="btn btn-primary">
            <i class="fas fa-chart-bar me-1"></i>View Full Visualizations
          </a>
        </div>
        {% else %}
        <div class="text-center py-5">
          <i class="fas fa-chart-bar fa-3x text-muted mb-3"></i>
          <h4>No Data Available</h4>
          <p class="text-muted">Make some predictions to see visualizations!</p>
          <a href="#predict" class="btn btn-primary">Make First Prediction</a>
        </div>
        {% endif %}
      </section>
      
      <!-- History Section -->
      <section id="history" class="page-section mt-5">
        <div class="page-header">
          <h2><i class="fas fa-history me-2"></i> Recent Predictions</h2>
          <div class="d-flex gap-2">
            <a href="/history" class="btn btn-sm btn-outline-primary">
              <i class="fas fa-eye me-1"></i> View All
            </a>
            {% if recent_records %}
            <a href="/download" class="btn btn-sm btn-outline-primary">
              <i class="fas fa-download me-1"></i> Export
            </a>
            {% endif %}
          </div>
        </div>
        
        {% if recent_records %}
        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead class="table-dark">
                  <tr>
                    <th>Timestamp</th>
                    <th>Customer</th>
                    <th>Item</th>
                    <th>Price</th>
                    <th>Prediction</th>
                    <th>Probability</th>
                  </tr>
                </thead>
                <tbody>
                  {% for record in recent_records %}
                  <tr>
                    <td>{{ record.timestamp }}</td>
                    <td>{{ record.name }}</td>
                    <td>{{ record.item }}</td>
                    <td>${{ "%.2f"|format(record.price) }}</td>
                    <td>
                      {% if record.prediction == 'Fraud' %}
                      <span class="badge bg-danger">{{ record.prediction }}</span>
                      {% else %}
                      <span class="badge bg-success">{{ record.prediction }}</span>
                      {% endif %}
                    </td>
                    <td>{{ "%.1f"|format(record.probability * 100) }}%</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            <div class="text-center mt-3">
              <a href="/history" class="btn btn-outline-primary">
                <i class="fas fa-history me-1"></i>View Complete History
              </a>
            </div>
          </div>
        </div>
        {% else %}
        <div class="text-center py-5">
          <i class="fas fa-history fa-3x text-muted mb-3"></i>
          <h4>No Transaction History</h4>
          <p class="text-muted">Make some predictions to see transaction history!</p>
          <a href="#predict" class="btn btn-primary">Make First Prediction</a>
        </div>
        {% endif %}
      </section>
      
      <!-- Upload Section -->
      <section id="upload" class="page-section mt-5">
        <div class="page-header">
          <h2><i class="fas fa-upload me-2"></i> Upload Dataset</h2>
          <div class="badge bg-warning p-2">Batch Processing</div>
        </div>
        
        <div class="row">
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">
                Upload New Dataset
              </div>
              <div class="card-body">
                <div class="mb-4 text-center">
                  <i class="fas fa-cloud-upload-alt display-3 text-secondary mb-3"></i>
                  <h4>Upload Transaction Data</h4>
                  <p class="text-muted">CSV, Excel or JSON files supported</p>
                </div>
                
                <div class="mb-4">
                  <input type="file" class="form-control">
                </div>
                
                <div class="d-grid">
                  <button class="btn btn-primary">
                    <i class="fas fa-upload me-2"></i> Upload & Analyze
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">
                Dataset Requirements
              </div>
              <div class="card-body">
                <h5 class="mb-3">File Specifications</h5>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <i class="fas fa-check-circle text-success me-2"></i>
                    CSV, XLSX, or JSON format
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-check-circle text-success me-2"></i>
                    Maximum file size: 50MB
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-check-circle text-success me-2"></i>
                    Required columns: Amount, Location, Product
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-check-circle text-success me-2"></i>
                    Date format: YYYY-MM-DD
                  </li>
                </ul>
                
                <div class="mt-4">
                  <h5>Sample Datasets</h5>
                  <div class="d-flex gap-2 mt-3">
                    <button class="btn btn-outline-primary">
                      <i class="fas fa-download me-2"></i> E-commerce Sample
                    </button>
                    <button class="btn btn-outline-primary">
                      <i class="fas fa-download me-2"></i> Retail Sample
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- About Section -->
      <section id="about" class="page-section mt-5">
        <div class="page-header">
          <h2><i class="fas fa-info-circle me-2"></i> About FraudShield</h2>
          <div class="badge bg-success p-2">MCA Final Year Project</div>
        </div>
        
        <div class="row">
          <div class="col-lg-8">
            <div class="card">
              <div class="card-body">
                <h4 class="mb-4">Advanced E-commerce Fraud Detection System</h4>
                <p class="mb-4">
                  FraudShield is a cutting-edge machine learning solution designed to identify and prevent fraudulent transactions in e-commerce platforms. 
                  Our system leverages multiple ML models to analyze transaction patterns in real-time and flag suspicious activities with high accuracy.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h5>FraudShield</h5>
          <p>Advanced fraud detection for e-commerce platforms using machine learning algorithms to identify suspicious transactions in real-time.</p>
          <div class="d-flex gap-3 mt-4">
            <a href="#" class="text-white"><i class="fab fa-github fa-lg"></i></a>
            <a href="#" class="text-white"><i class="fab fa-twitter fa-lg"></i></a>
            <a href="#" class="text-white"><i class="fab fa-linkedin fa-lg"></i></a>
          </div>
        </div>
        
        <div class="footer-section">
          <h5>Quick Links</h5>
          <ul class="footer-links">
            <li><a href="/"><i class="fas fa-arrow-right"></i> Fraud Prediction</a></li>
            <li><a href="/visualize"><i class="fas fa-arrow-right"></i> Data Visualization</a></li>
            <li><a href="/history"><i class="fas fa-arrow-right"></i> Transaction History</a></li>
            <li><a href="/upload"><i class="fas fa-arrow-right"></i> Dataset Upload</a></li>
            <li><a href="/about"><i class="fas fa-arrow-right"></i> About Project</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h5>Contact Us</h5>
          <ul class="footer-links">
            <li><a href="#"><i class="fas fa-envelope"></i> contact@fraudshield.com</a></li>
            <li><a href="#"><i class="fas fa-phone"></i> +1 (555) 123-4567</a></li>
            <li><a href="#"><i class="fas fa-map-marker-alt"></i> University Campus, Computer Science Dept</a></li>
            <li><a href="#"><i class="fas fa-calendar"></i> MCA Final Year Project 2023</a></li>
          </ul>
        </div>
      </div>
      
      <div class="copyright">
        &copy; 2023 FraudShield | E-commerce Fraud Detection System | MCA Final Year Project
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Remove all static chart code - charts will be generated dynamically on /visualize page
    console.log('FraudShield loaded successfully');
  </script>
</body>
</html>
